<view class="container">
  <view class="activity-head">
    <view class="activity-head-notice">
      <image src="../../images/voice.png" />
      <view class="activity-head-notice0" style="width: {{noticeWidth}}px">{{activityNotice}}</view>
      <view class="" />
    </view>
    <view class="activity-head-money">
      <text>我的红包:</text>
      <text class="activity-head-money-num">{{money}}</text>
      <text>元</text>
      <navigator hover-class="none" url="/pages/records/index?type=1">
        <text class="activity-head-money-btn">领取</text>
      </navigator>
    </view>
  </view>

  <view class="activitys">
    <view class="activity-item" wx:for="{{activitys}}" wx:key="{{item.aid}}">
      <view class="activity-item-poster">
        <image lazy-load="{{true}}" 
          mode="aspectFill" 
          src="{{item.banner}}"
          bindtap="clickJumpPage"
          data-aid="{{item.aid}}" />
        <view class="match-info-mask"/>
        <view class="match-info-layout match-info-text" bindtap="clickJumpPage" data-aid = "{{item.aid}}">
          <view class="match-info-top-layout ">
            <view>{{item.name}}</view>
            <!-- score等于-1的时候，就表示没有参赛 -->
            <!-- status 0未开始，1进行中，2暂停中，3已结束，4已取消 -->
            <view class="{{item.status != 1 ? 'match-end-text' : 'match-status-text'}}">{{item.status_text}}</view>
          </view>
          <!--5种status的展示-->
          <!-- 没有到比赛的时间 -->
          <block wx:if="{{item.status==0}}">
            <view style="display:flex; flex-direction: column; align-items:center;">
              <view style="margin-bottom: 3px;">开赛时间</view>
              <view>{{item.startTime}}</view>
            </view>
          </block>
        <!-- 未参赛 -->
          <block wx:if="{{item.status==1 && item.score==-1}}">
            <view>未参赛</view>
            <view style="display: flex; flex-direction: row;">
              <text class="dashed-line" style="margin-right: 5px;"/>
              <text class="dashed-line"/>
            </view>
          </block>
          <!-- 参赛且有分数 -->
          <block wx:if="{{item.status==1 && item.score > -1}}">
            <view class="player-match-status-layout">
              <view style="flex: 1;"/>
              <view style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <view>我的分数</view>
                 <view class="display-score-text">{{item.score}}</view>
              </view>
              <view wx:if="{{item.tips.length>0}}" class="red-packet-bg">
                  <!-- <text>差</text>
                  <text>750</text>
                  <text>分瓜分红包</text> -->
                  {{item.tips}}
              </view>
              <view wx:else style="flex: 1;"/>
            </view>
          </block>
          <!-- 比赛结束，但是没有参赛 -->
           <block wx:if="{{item.status==3 && item.score==-1}}">
            <view>未参赛</view>
            <view style="display: flex; flex-direction: row;">
              <text class="dashed-line" style="margin-right: 5px;"/>
              <text class="dashed-line"/>
            </view>
          </block>
          <!-- 比赛结束，有分数，但是没有获得红包 -->
          <block wx:if="{{item.status==3 && item.score>-1 && item.prize == 0}}">
            <view class="player-match-status-layout">
              <view style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <view>我的分数</view>
                 <view class="display-score-text">{{item.score}}0000</view>
              </view>
              <view style="width: 1px; height: 100rpx; margin: 0 20rpx;; background: #eee"></view>
               <view style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                很遗憾未获得奖金
               </view>
            </view>
          </block>
          <!-- 比赛结束，有分数且获得红包-->
           <block wx:if="{{item.status==3 && item.score>-1 && item.prize > 0}}">
            <view class="player-match-status-layout">
              <view style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <view>我的分数</view>
                 <view class="display-score-text">{{item.score}}0000</view>
              </view>
              <view style="width: 1px; height: 100rpx; margin: 0 20rpx;; background: #eee"></view>
               <view style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <view>获得现金</view>
                 <view class="display-score-text">1000000</view>
              </view>
            </view>
          </block>
          <!--end-->
          <!-- 未开赛或是取消状态不显示参赛人数 -->
          <view>{{item.playerNum}}</view>
        </view>
      </view>
      

      <!--参赛信息-->
        
         
      <view class="btn-layout">
        <view class="game-info-layout">
          <image src="{{item.logo}}" class="avatar-image"  bindtap="clickJumpPage" data-aid = "{{item.aid}}" />
          <view class="game-title-text">{{item.gname}}</view>
        </view>

        <view class="btn-white-hollow" data-aid="{{item.aid}}" bindtap="onHelp">邀请好友</view>
        <xcx-navigator game="{{item}}">
          <view class="btn-blue-soild" bindtap="playMatch" data-aid="{{item.aid}}">立即参赛</view>
        </xcx-navigator>
      </view>

      <!-- 活动简介 -->
      <view class="activity-desc-layout" bindtap="foldToggle" data-id="{{index}}">
        <view class="activity-rules rules-line{{item.texts.length>=2 ? '2' : '' }} {{item.isFold ? '' : 'unfold'}}">
          <view wx:for="{{item.texts}}" wx:for-item="rule" wx:key="*this">{{rule}}</view>
        </view>
        <view wx:if="{{item.texts.length>2}}" class="fold">
          <view class="arrow" animation="{{animationList[index]}}"/>
        </view>
          <!-- <view wx:if="{{item.texts.length==1}}" class="activity-desc-single-text">
            {{item.texts}}
          </view> 

          <view wx:else class="{{activitys[index].isFold ? 'activity-desc-two-text' : 'activity-desc-text'}}">
            {{item.texts}}
          </view>
           
          <view wx:if="{{item.texts.length>1}}" class="fold" bindtap="foldToggle" data-id="{{index}}">
            <view class="arrow" animation="{{animationList[index]}}"/>
          </view> -->
         
        </view>
    </view>
  </view>

  <xcx-zhuli show="{{helpShow}}" helpList="{{helpList}}" />

</view>
<xcx-login bindonlogin="onLogin" />
